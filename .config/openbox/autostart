#!/bin/bash

run() {
    delay="$1"
    shift
    cmd="$1"
    shift

    (
        sleep "$delay"
        [ -n "$(pidof "$cmd")" ] || exec "$cmd" "$@" > /dev/null 2>&1
    ) &
}

for f in "$DOTFILES"/.config/xinitrc.d/?*.sh ; do
    [ -f "$f" ] && . "$f"
done

run 1s xss-lock -l -- "$DOTFILES/bin/lock.sh"

if command -v xsecurelock &> /dev/null ; then
    true
elif command -v xscreensaver &> /dev/null ; then
    run 1s xscreensaver
fi

run 2s fbpanel
run 4s conky
run 4s easystroke
