#!/bin/sh
set -uf

run() {
    cmd="$1"
    shift

    if [ $# -ge 1 ] ; then
        sleep=$1
        shift
    fi

    (
        [ -n "${sleep:+x}" ] && sleep "$sleep"
        [ -n "$(pidof "$cmd")" ] || exec "$cmd" "$@" > /dev/null 2>&1
    ) &
}

/usr/bin/xsetroot -solid black
/usr/bin/xset r rate 250 25
/usr/bin/xset b off

run "/usr/bin/uxterm" 1s

run "$HOME/bin/fbpanel" 2s
run "$HOME/bin/conky" 3s

run "/usr/bin/gxkb" 4s
run "/usr/bin/pasystray" 4s

run "/usr/bin/xscreensaver" 4s
run "/usr/bin/xss-lock" 5s -l -- ~/bin/lock.sh

run "$HOME/bin/easystroke" 5s

#[ -x "$DOTFILES/opt/setlayout/setlayout" ] && "$DOTFILES/opt/setlayout/setlayout" 0 4 2 0
