#!/bin/sh

run() {
  if [ $# -eq 1 ] ; then
    ( exec $1 &> /dev/null ) &
  fi
  if [ $# -eq 2 ] ; then
    ( sleep $2 ; [[ -z `pidof $1` ]] && exec $1 &> /dev/null ) &
  fi
}

/usr/bin/xset r rate 250 25
/usr/bin/xsetroot -solid black

run "/usr/bin/uxterm" 1s

run "/usr/bin/qxkb" 2s

run "$HOME/.dotfiles/bin/fbpanel" 3s
run "$HOME/.dotfiles/bin/conky" 3s

run "/usr/bin/pasystray" 4s
run "/usr/bin/xscreensaver" 4s

( sleep 5s ; [[ -z `pidof /usr/bin/xss-lock` ]] && exec /usr/bin/xss-lock -- xscreensaver-command -lock &> /dev/null ) &
