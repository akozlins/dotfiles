#!/bin/bash
set -euf

DOTFILES="${DOTFILES:-$HOME/.dotfiles}"
CMD=(
    env -i
    "HOME=$DOTFILES"
    "PATH=$(command -p getconf PATH)"
    "DISPLAY=$DISPLAY"
    "XAUTHORITY=$XAUTHORITY"

    "STEAM_LINUX_RUNTIME_LOG=1"
    "STEAM_LINUX_RUNTIME_VERBOSE=1"

    /usr/bin/steam
    "-console"
    "$@"
)

[ $# -gt 0 ] && exec "${CMD[@]}"
exec "${CMD[@]}" &> "$STEAM_HOME/steam.log" &
