#!/bin/bash
set -euf

PATH="$(command -p getconf PATH)"
export PATH

private="$XDG_CACHE_HOME/tor-browser"
mkdir -pv -- "$private"

CMD=(
    /usr/bin/tor-browser
    "$@"
)

CMD=(
    firejail
    "--private=$private"
    --
    "${CMD[@]}"
)

[ $# -gt 0 ] && exec "${CMD[@]}"
exec "${CMD[@]}" &> /dev/null &
