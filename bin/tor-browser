#!/bin/bash
set -euf

CMD=("/usr/bin/tor-browser" "$@")

private="$XDG_CACHE_HOME/tor-browser"
mkdir -p "$private"

FJ="/usr/bin/firejail"
[ -x "$FJ" ] && CMD=("$FJ" "--private=$private" -- "${CMD[@]}")

if [ $# -eq 0 ] ; then
    exec "${CMD[@]}" > /dev/null 2>&1 &
else
    exec "${CMD[@]}"
fi
