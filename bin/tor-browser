#!/bin/bash
set -euf

PATH="$(command -p getconf PATH)"
export PATH

private="$XDG_CACHE_HOME/tor-browser"
mkdir -pv -- "$private"

CMD=(
    "/bin/firejail"
    "--private=$private"
    --
    "/bin/tor-browser"
    "$@"
)

if [ $# -eq 0 ] ; then
    exec "${CMD[@]}" > /dev/null 2>&1 &
else
    exec "${CMD[@]}"
fi
