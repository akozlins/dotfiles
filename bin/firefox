#!/bin/bash
set -euf

DOTFILES="${DOTFILES:-$HOME/.dotfiles}"
[ -d "$DOTFILES" ] && export HOME="$DOTFILES"

export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
PROFILE="$XDG_DATA_HOME/firefox/default"

CMD=(
    /usr/bin/firefox
    --profile "$PROFILE"
    "$@"
)

if [ $# -gt 0 ] ; then
    exec "${CMD[@]}"
else
    exec "${CMD[@]}" > /dev/null 2>&1 &
fi
