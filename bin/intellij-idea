#!/bin/sh
set -euf

#export IDEA_VM_OPTIONS="$XDG_CONFIG_HOME/intellij-idea/vmoptions"
export IDEA_PROPERTIES="$XDG_CONFIG_HOME/intellij-idea/properties"

if [ $# -eq 1 ] && [ "$1" = "--reset" ] ; then
    rm -rf "$HOME/.java"
    rm -rf "$XDG_CACHE_HOME/intellij-idea"
    exit 0
fi

CMD=("/usr/bin/idea.sh" "$@")

if [ $# -eq 0 ] ; then
  exec "${CMD[@]}" > /dev/null 2>&1 &
else
  exec "${CMD[@]}"
fi
